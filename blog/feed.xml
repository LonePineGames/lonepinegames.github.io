<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="https://lonepine.io/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://lonepine.io/blog/" rel="alternate" type="text/html" /><updated>2019-10-13T12:06:22-07:00</updated><id>https://lonepine.io/blog/feed.xml</id><title type="html">New Cities</title><subtitle>Build Prosperity.</subtitle><entry><title type="html">New Cities Friday Facts #3: Roads to Prosperity</title><link href="https://lonepine.io/blog/2019/10/11/roads-to-prosperity.html" rel="alternate" type="text/html" title="New Cities Friday Facts #3: Roads to Prosperity" /><published>2019-10-11T00:00:00-07:00</published><updated>2019-10-11T00:00:00-07:00</updated><id>https://lonepine.io/blog/2019/10/11/roads-to-prosperity</id><content type="html" xml:base="https://lonepine.io/blog/2019/10/11/roads-to-prosperity.html">&lt;figure class=&quot;video caption-top &quot;&gt;
  &lt;video autoplay=&quot;&quot; loop=&quot;&quot; controls=&quot;&quot; poster=&quot;/blog/assets/images/interchange.png&quot;&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/interchange.mp4&quot; /&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/interchange.webm&quot; /&gt;
  &lt;/video&gt;
  &lt;figcaption&gt;A stack interchange&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Cities are really about transportation. People choose where to live based on estimated travel time to work, school, or amenities. “Research&lt;sup&gt;&lt;a href=&quot;https://nascsp.org/wp-content/uploads/2018/02/issuebrief-benefitsofruralpublictransportation.pdf&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt; has shown that ease of access to transport has a stronger influence on whether someone will earn more than their parents did, than the level of crime in their area or whether they grew up in a two-parent household,” according to &lt;a href=&quot;https://youtu.be/fwjwePe-HmA&quot;&gt;Wendover Productions&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;New Cities features many kinds of roads, from tree-lined boulevards to high-speed expressways to traffic-corralling one way streets, from stop signs to stop lights to stack interchanges. But currently the only kinds of transportation in New Cities are private automobiles and freight trucks. There are no buses, bikes, pedestrians, trains, airplanes, boats, or even carpools – yet.&lt;/p&gt;

&lt;p&gt;After the crowdfunding champaign, there will be a contributors-only vote to determine which new features to prioritize, and most of the candidate features will be related to transportation – so don’t worry, your inner train geek will be satisfied.&lt;/p&gt;

&lt;figure class=&quot;video caption-top caption-below&quot;&gt;
  &lt;video autoplay=&quot;&quot; loop=&quot;&quot; controls=&quot;&quot; poster=&quot;/blog/assets/images/planner.png&quot;&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/planner.mp4&quot; /&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/planner.webm&quot; /&gt;
  &lt;/video&gt;
  &lt;figcaption&gt;Designing an expressway ramp in Planner Mode, which allows you to evaluate road designs before paying for them.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;In order to lay the groundwork for these many modes of transit, I needed to refactor and improve “the graph.” The graph is the internal representation of the road system. In the language of &lt;a href=&quot;https://en.wikipedia.org/wiki/Graph_theory&quot;&gt;graph theory&lt;/a&gt;, the intersections and junctions are “nodes” and the road segments connecting them are “edges”. Each edge connects two nodes, and each node to can connect up to six edges.&lt;/p&gt;

&lt;figure class=&quot;image caption-below&quot;&gt;
  &lt;a href=&quot;https://xkcd.com/2036/&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/edgelord.png&quot; alt=&quot;XKCD 2036&quot; /&gt;
    &lt;figcaption&gt;XKCD 2036&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Currently, there are only roads and expressways, but in the future this system might represent train tracks, bus routes, airways, and sea lanes. Underneath the graph is the lane system, which tells vehicles where to go. Lanes are also used for routing. The lane system is managed automatically by the game based on modifications of the graph. Sidewalks, bike lanes and HOV lanes would be implemented as special kinds of lanes on roads and expressways.&lt;/p&gt;

&lt;p&gt;When you place an edge (road), the game detects any place where that edge crosses another. It then “splits” both edges by placing a node (intersection) between them. When placing one segment of road, there might be a dozen splits or more.&lt;/p&gt;

&lt;p&gt;But it gets even more complicated. The roads are split in order to conform to the elevation of terrain. Then there is Planner Mode, which allows you to plan roads before paying for them, and this means that splits must keep track of whether roads are completed or just planned.&lt;/p&gt;

&lt;figure class=&quot;video caption-top &quot;&gt;
  &lt;video autoplay=&quot;&quot; loop=&quot;&quot; controls=&quot;&quot; poster=&quot;/blog/assets/images/splits.png&quot;&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/splits.mp4&quot; /&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/splits.webm&quot; /&gt;
  &lt;/video&gt;
  &lt;figcaption&gt;How splits work&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Once the splits are all resolved, intersections must be geometrically arranged, illegal states must be detected (underwater, too steep, etc), and costs must be computed. Terrain must be leveled, buildings must also be leveled, buildings and lots must be reassigned, new zone-able lots must be allocated, and the lane system must be updated. Finally, everything has to be rendered to screen.&lt;/p&gt;

&lt;p&gt;The game has to do all of this in less than 16.667 milliseconds.&lt;/p&gt;

&lt;p&gt;The graph was the very first thing I implemented, and therefore was most in need of a refactor. There were three issues I addressed with this refactor. Firstly, there were performance issues. I improved performance by making sure that things like rendering happened only once per frame, not once per split. (Performance issues are usually caused by redundant work.)&lt;/p&gt;

&lt;p&gt;Secondly, it was possible to accidentally create duplicate, overlapping road segments (two roads connecting the same two intersections). This not only looked ugly but caused further glitches. Now when you overlap one road with another, it upgrades or modifies that section of road instead. In addition, building-by-overlap corrects the direction of one-way roads and expressways, meaning you can change the direction of a long stretch of one-way road using just two clicks – a really powerful tool.&lt;/p&gt;

&lt;figure class=&quot;video caption-top &quot;&gt;
  &lt;video autoplay=&quot;&quot; loop=&quot;&quot; controls=&quot;&quot; poster=&quot;/blog/assets/images/one-way-switch.png&quot;&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/one-way-switch.mp4&quot; /&gt;
    &lt;source src=&quot;https://github.com/LonePineGames/lonepinegames.github.io/releases/download/v0.3.0/one-way-switch.webm&quot; /&gt;
  &lt;/video&gt;
  &lt;figcaption&gt;Reversing the direction of a one-way road while upgrading it to four lanes and installing traffic lights -- all with just two clicks.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Thirdly, it was difficult to predict where intersections would happen. Sometimes roads would go under or over each other unexpectedly. When you actually did want an overpass, sometimes you’d get an intersection instead.  This was particularly frustrating when building expressways. Now the game computes and displays splits as you’re placing the road, making connection points clear. It also computes and displays an accurate price tag for the road you’re about to place.&lt;/p&gt;

&lt;p&gt;Transportation is really at the core of New Cities, and building roads is part of the &lt;a href=&quot;https://gameanalytics.com/blog/how-to-perfect-your-games-core-loop.html&quot;&gt;core gameplay loop&lt;/a&gt;. I’m very glad that I’ve made these improvements. This project is moving forward at HOV lane speeds, so I’m thankful that you’re riding carpool with me.&lt;/p&gt;

&lt;p&gt;If you’re excited about the project, join the &lt;a href=&quot;https://discord.gg/udgeB2E&quot;&gt;discord&lt;/a&gt; or &lt;a href=&quot;https://www.reddit.com/r/New_Cities&quot;&gt;subreddit&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">A stack interchange</summary></entry><entry><title type="html">New Cities Friday Facts #2: Sound and Music</title><link href="https://lonepine.io/blog/2019/10/04/sounds.html" rel="alternate" type="text/html" title="New Cities Friday Facts #2: Sound and Music" /><published>2019-10-04T19:00:00-07:00</published><updated>2019-10-04T19:00:00-07:00</updated><id>https://lonepine.io/blog/2019/10/04/sounds</id><content type="html" xml:base="https://lonepine.io/blog/2019/10/04/sounds.html">&lt;figure class=&quot;image &quot;&gt;
  &lt;a href=&quot;&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/sunset.png&quot; alt=&quot;This post is about sound, so here's a pretty image.&quot; /&gt;
    &lt;figcaption&gt;This post is about sound, so here's a pretty image.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;For a long time, it wasn’t in my plans for the game to have sound by the time it went to early access. It’s not that I didn’t want sound, but it wasn’t a priority. I can’t recall ever having played a game without sound (or without music), but I also never felt like it was the most important part of any game. For a thousand-hour game, most players will mute the game music at some point and listen to their own music, or a podcast, etc. This week I implemented environmental sounds in the game, and I’m happy to say that I was wrong about it’s importance – sound makes the game a much more complete audio-visual experience.&lt;/p&gt;

&lt;p&gt;Music was never a talent of mine and I never learned to play an instrument. I had planned to make connections with a musician and either licence their music or have them compose music for the game. However, when it came time to make a trailer, I hadn’t made any such connection. I strongly believe that a good trailer needs music, so I had to find something. I eventually tried composing music using MuseScore. MuseScore is an application to write songs using a virtual sheet music interface – almost like a front-end to MIDI. After the trailer was released, I was approached by musicians offering to compose music for the game. However, I’m quite proud of the music I’ve made and I plan to make more. I’m also thinking about using Audacity to add samples and effects to the music, in order to make it more full and less “MIDI-like”.&lt;/p&gt;

&lt;p&gt;Video game music is usually built around melodic chord progressions which are plesant enough to not be tedious when repeated for a long time. I still haven’t figured out the arcane rules of chord progressions, but fortunately people who do understand them have written chord progression generators that can easily be found through Google. All of the game music is created by starting with one of these progressions, and then just repeating, modifying, and playing with the pattern of notes and beats to make it interesting.&lt;/p&gt;

&lt;figure class=&quot;image &quot;&gt;
  &lt;a href=&quot;&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/menu.png&quot; alt=&quot;The main menu. I also added clouds to the skybox this week.&quot; /&gt;
    &lt;figcaption&gt;The main menu. I also added clouds to the skybox this week.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Once I had music implemented in the game, it was easy enough to add user interface sound effects (a click sound when you place a road, for example). But for a while there were no environmental sounds. This week I changed that. I’ve implemented a pretty immersive sound environment. There are ambient sounds of traffic, human activity, and life in the city. There are also sounds for the wind, rain, water, and wildlife. I even added a fun retro floppy disk sound when the game starts and on save/load. These additions really add a lot to the game.&lt;/p&gt;

&lt;p&gt;I plan for New Cities to be your next thousand-hour game. To meet that standard, you’ll need to have a positive immersive experience within the first hour. Even if you mute the game after a day or two, your brain will remember that immersiveness. This will keep the game enjoyable for a long time.&lt;/p&gt;

&lt;p&gt;If you’re excited about the project, join the &lt;a href=&quot;https://discord.gg/udgeB2E&quot;&gt;discord&lt;/a&gt; or &lt;a href=&quot;https://www.reddit.com/r/New_Cities&quot;&gt;subreddit&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">This post is about sound, so here's a pretty image.</summary></entry><entry><title type="html">New Cities Friday Facts #1</title><link href="https://lonepine.io/blog/2019/09/26/new-cities-friday-facts.html" rel="alternate" type="text/html" title="New Cities Friday Facts #1" /><published>2019-09-26T15:00:00-07:00</published><updated>2019-09-26T15:00:00-07:00</updated><id>https://lonepine.io/blog/2019/09/26/new-cities-friday-facts</id><content type="html" xml:base="https://lonepine.io/blog/2019/09/26/new-cities-friday-facts.html">&lt;p&gt;Hi, Lone Pine here. I’m going to start posting weekly updates on the project to keep you guys informed of what’s going on, what features are being worked on, and our progress on the road to release.&lt;/p&gt;

&lt;figure class=&quot;image &quot;&gt;
  &lt;a href=&quot;&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/city_overview.png&quot; alt=&quot;A small town, just shy of the 20,000 people needed to officially be a city.&quot; /&gt;
    &lt;figcaption&gt;A small town, just shy of the 20,000 people needed to officially be a city.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;If you’re new here, I’m working on a city builder called New Cities. Over the last year, I’ve developed a basic city builder with a traffic simulation and customizable 3D rendered buildings. In the past few months I’ve fully implemented “The Prosperity System” which will define the game. It’s a dynamic economic model where neighborhoods thrive or fail based on access to work, shopping, parks, and schools.&lt;/p&gt;

&lt;figure class=&quot;image &quot;&gt;
  &lt;a href=&quot;&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/prosperity.png&quot; alt=&quot;The Prosperity heatmap. There are two prosperous areas, one around the city center and the other around a small shopping area.&quot; /&gt;
    &lt;figcaption&gt;The Prosperity heatmap. There are two prosperous areas, one around the city center and the other around a small shopping area.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;The game is based around six “heatmaps”. The heatmaps are Pollution, Crime, Education, Prosperity, Value, and Density. Essentially, Education (plus a good road system) creates Prosperity, Prosperity (among other things) creates Value, and Value (plus Prosperity) creates Density. However, Density creates Crime and Pollution, which have a negative impact on Prosperity and Value, creating a &lt;a href=&quot;https://en.wikipedia.org/wiki/Negative_feedback&quot;&gt;negative feedback loop&lt;/a&gt;. Negative feedback loops are important to me, since they counteract the explosive nature of positive feedback loops which turn many simulation games into sandboxes.&lt;/p&gt;

&lt;figure class=&quot;image &quot;&gt;
  &lt;a href=&quot;&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/value.png&quot; alt=&quot;The Value heatmap. There are two high-value areas around the city center and a shopping area. The red in the top right is a low value area, since there isn't a school in that neighborhood. The white buildings are schools.&quot; /&gt;
    &lt;figcaption&gt;The Value heatmap. There are two high-value areas around the city center and a shopping area. The red in the top right is a low value area, since there isn't a school in that neighborhood. The white buildings are schools.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;As a player, you have two options. You can buy very expensive city services (schools, parks, police stations, etc) to cut through the negative feedback loop. Alternately, you can build a broad, flat, suburban city, with the intention to grow a dense city center later in the game. I call these two approaches “San Francisco vs Los Angeles.” I consider this to be a kind of morality system, creating the opportunity for different playstyles and different cities.&lt;/p&gt;

&lt;figure class=&quot;image &quot;&gt;
  &lt;a href=&quot;&quot;&gt;
    &lt;img src=&quot;/blog/assets/images/abandoned_city_center.png&quot; alt=&quot;Downtown in a declining city, where several buildings are abandoned.&quot; /&gt;
    &lt;figcaption&gt;Downtown in a declining city, where several buildings are abandoned.&lt;/figcaption&gt;
  &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;In this game, a city doesn’t just linearly grow. Instead the community behaves like a living organism, emerging out of chaos and always at risk of dying. You’ll have to shepherd your city through randomized recessions in the national economy as well as the consequences of any blunders you make. It will be a more random game than previous city builders, with a more vulnerable budget maintaining a fundamentally unstable economic system.&lt;/p&gt;

&lt;p&gt;We’ll be starting crowdfunding in the next two months. One of the tier rewards will be to participate in a closed alpha, which we hope to start before the end of the year.&lt;/p&gt;

&lt;p&gt;If you’re excited about the project, join the &lt;a href=&quot;https://discord.gg/udgeB2E&quot;&gt;discord&lt;/a&gt; or &lt;a href=&quot;https://www.reddit.com/r/New_Cities&quot;&gt;subreddit&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">Hi, Lone Pine here. I’m going to start posting weekly updates on the project to keep you guys informed of what’s going on, what features are being worked on, and our progress on the road to release.</summary></entry></feed>